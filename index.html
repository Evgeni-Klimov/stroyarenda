<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интерактивный бизнес-план: Прокат инструмента в Архангельске</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Warm Neutrals) -->
    <!-- Application Structure Plan: A tab-based single-page application is chosen for optimal user experience. This structure logically separates the core components of the business plan (Market, Finance, Pitch, Plan) into digestible sections. The user can easily navigate between deep-diving into market analysis, interacting with the financial model, reviewing the investor summary, and checking the implementation timeline without excessive scrolling. This approach prioritizes clarity and focused exploration of each distinct aspect of the business. -->
    <!-- Visualization & Content Choices: 
        - CAPEX Breakdown (Summary & Finance): Goal: Inform. Viz: Donut Chart. Interaction: Dynamically updates based on tool selection in the finance tab. Justification: Clearly visualizes the composition of the initial investment. Library: Chart.js (Canvas). NO SVG/Mermaid.
        - Competitor Matrix (Marketing): Goal: Organize/Compare. Viz: Styled HTML Table. Justification: The most effective and direct way to present structured comparative data about competitors. Method: Tailwind CSS. NO SVG/Mermaid.
        - Financial Projections (Finance): Goal: Analyze Change. Viz: Combined Bar and Line Chart. Interaction: A fully interactive model with controls for CAPEX (tool selection, prices) and OPEX (rent, salaries, marketing) dynamically updates the chart. Justification: Provides a comprehensive, interactive view of the project's financial viability. Library: Chart.js (Canvas). NO SVG/Mermaid.
        - Payback Period (Finance): Goal: Analyze Change. Viz: Line Chart with area fill. Interaction: Also updates with all financial controls. Justification: Visually pinpoints the break-even point. Library: Chart.js (Canvas). NO SVG/Mermaid.
        - Implementation Plan (Plan): Goal: Organize. Viz: Structured HTML/CSS Timeline. Justification: Clearly presents sequential steps and milestones. Method: Tailwind CSS. NO SVG/Mermaid.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #383838;
        }
        .tab-active {
            border-bottom-color: #A37F5A;
            color: #A37F5A;
            font-weight: 600;
        }
        .tab-inactive {
            border-bottom-color: transparent;
            color: #6B7280;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .card {
            background-color: #FFFFFF;
            border: 1px solid #F0E9E1;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #E5E7EB;
            border-radius: 5px;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #A37F5A;
            cursor: pointer;
            border-radius: 50%;
        }
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #A37F5A;
            cursor: pointer;
            border-radius: 50%;
        }
        .collapsible-header {
            cursor: pointer;
        }
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .input-number-sm {
            width: 6rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            border: 1px solid #D1D5DB;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-800">Инновационный сервис проката инструмента</h1>
            <p class="text-xl text-gray-500 mt-2">Комплексное исследование и бизнес-модель для г. Архангельск</p>
        </header>

        <div class="border-b border-gray-200 mb-8">
            <nav class="flex flex-wrap justify-center -mb-px space-x-6">
                <button data-tab="summary" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm tab-active">Резюме</button>
                <button data-tab="market-research" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm tab-inactive">Маркет. исследование</button>
                <button data-tab="finance" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm tab-inactive">Финансовая модель</button>
                <button data-tab="investor-pitch" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm tab-inactive">Презентация</button>
                <button data-tab="implementation" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm tab-inactive">План реализации</button>
            </nav>
        </div>

        <main>
            <section id="summary" class="content-section active">
                <div class="card">
                    <h2 class="text-2xl font-bold mb-4 text-gray-700">Резюме проекта</h2>
                    <p class="text-gray-600 mb-6">Проект предполагает создание технологичного сервиса по прокату строительного инструмента в Архангельске. Ключевые отличия от конкурентов — универсальная модель аренды без денежного залога (заменяется страховым взносом), современная онлайн-платформа для бронирования и специальная программа лояльности для B2B-клиентов. Цель — занять лидирующие позиции на рынке за счет высокого качества сервиса и операционной эффективности.</p>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center mb-8">
                         <div class="p-4 bg-amber-50 rounded-lg">
                            <h3 class="text-sm font-semibold text-amber-800">Объем инвестиций</h3>
                            <p class="text-2xl font-bold text-amber-900 mt-1" id="summary_investment">4,850,000 ₽</p>
                        </div>
                        <div class="p-4 bg-sky-50 rounded-lg">
                            <h3 class="text-sm font-semibold text-sky-800">Срок окупаемости</h3>
                            <p class="text-2xl font-bold text-sky-900 mt-1" id="summary_payback">28 мес.</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg">
                            <h3 class="text-sm font-semibold text-green-800">ROI (за 3 года)</h3>
                            <p class="text-2xl font-bold text-green-900 mt-1" id="summary_roi">145%</p>
                        </div>
                        <div class="p-4 bg-indigo-50 rounded-lg">
                            <h3 class="text-sm font-semibold text-indigo-800">Выручка (3-й год)</h3>
                            <p class="text-2xl font-bold text-indigo-900 mt-1" id="summary_revenue_y3">12.45 млн ₽</p>
                        </div>
                    </div>
                    <div class="mt-8">
                        <h3 class="text-xl font-bold mb-4 text-gray-700 text-center">Структура стартовых инвестиций (CAPEX)</h3>
                        <div class="chart-container h-64 md:h-80">
                            <canvas id="capexChartSummary"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="market-research" class="content-section">
                <div class="card">
                     <h2 class="text-2xl font-bold mb-4 text-gray-700">Детальное маркетинговое исследование</h2>
                     <p class="text-gray-600 mb-6">Рынок проката инструмента в Архангельске является зрелым и высококонкурентным. Успех нового игрока зависит не от ценовой войны, а от способности предложить принципиально лучший клиентский опыт и уникальные условия, решающие "боли" как профессиональных строителей, так и частных клиентов.</p>

                    <div class="grid md:grid-cols-2 gap-8 mb-8">
                         <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="text-xl font-semibold mb-3">Размер и потенциал рынка</h3>
                            <p class="text-gray-600 text-sm">Основа спроса — стабильная строительная активность в регионе.</p>
                            <div class="mt-4 space-y-3">
                                <div class="flex items-start space-x-3">
                                    <span class="text-2xl font-bold text-blue-600">57</span>
                                    <p class="text-sm">млрд рублей инвестировано в строительную отрасль за последние 5 лет.</p>
                                 </div>
                                 <div class="flex items-start space-x-3">
                                    <span class="text-2xl font-bold text-blue-600">2.1</span>
                                    <p class="text-sm">млн м² жилья введено в эксплуатацию за тот же период.</p>
                                 </div>
                                  <div class="flex items-start space-x-3">
                                    <span class="text-2xl font-bold text-blue-600">18+</span>
                                    <p class="text-sm">компаний уже работают на рынке проката инструмента в городе по данным 2GIS.</p>
                                 </div>
                            </div>
                         </div>
                         <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="text-xl font-semibold mb-3">Целевая аудитория</h3>
                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-bold text-gray-800">B2B (Основной сегмент)</h4>
                                    <p class="text-sm text-gray-600">Строительные бригады, частные мастера, подрядчики. Ценят надежность, ассортимент и гибкие условия оплаты (постоплата).</p>
                                </div>
                                 <div>
                                    <h4 class="font-bold text-gray-800">B2C (Вторичный сегмент)</h4>
                                    <p class="text-sm text-gray-600">Владельцы квартир (DIY-ремонт), дачники. Ценят удобство, простоту оформления и отсутствие больших залогов.</p>
                                </div>
                            </div>
                         </div>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Анализ ключевых конкурентов</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="p-3 font-medium">Конкурент</th>
                                    <th class="p-3 font-medium">Сильные стороны</th>
                                    <th class="p-3 font-medium">Слабые стороны</th>
                                    <th class="p-3 font-medium">Ключевая особенность</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y">
                                <tr>
                                    <td class="p-3 font-semibold"><a href="https://nordinstrument.com/" target="_blank" class="text-blue-600 hover:underline">Норд Инструмент</a></td>
                                    <td class="p-3">2 точки, доп. услуги (продажа, ремонт), хороший сайт, постоплата для юрлиц</td>
                                    <td class="p-3">Высокий ценовой сегмент, стандартная модель с залогом</td>
                                    <td class="p-3">Диверсификация бизнеса</td>
                                </tr>
                                <tr>
                                    <td class="p-3 font-semibold"><a href="https://stroiarenda.com/" target="_blank" class="text-blue-600 hover:underline">Стройаренда</a></td>
                                    <td class="p-3">Аренда спецтехники, известное имя</td>
                                    <td class="p-3">Устаревший сайт, аренда без залога только для "постоянных"</td>
                                    <td class="p-3">Работа с крупной техникой</td>
                                </tr>
                                <tr>
                                    <td class="p-3 font-semibold"><a href="https://instrumenttut29.ru/" target="_blank" class="text-blue-600 hover:underline">ИнструментТут29</a></td>
                                    <td class="p-3">Качественная техника, гибкие сроки</td>
                                    <td class="p-3">Нет онлайн-бронирования, стандартные условия</td>
                                    <td class="p-3">Фокус на качестве парка</td>
                                </tr>
                                 <tr>
                                    <td class="p-3 font-semibold"><a href="https://www.avito.ru/arkhangelsk/predlozheniya_uslug/oborudovanie_proizvodstvo-ASgBAgICAUSYC_SbAQ?q=%D0%BF%D1%80%D0%BE%D0%BA%D0%B0%D1%82+%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0" target="_blank" class="text-blue-600 hover:underline">Частные объявления (Avito)</a></td>
                                    <td class="p-3">Низкая цена</td>
                                    <td class="p-3">Нет гарантий, риски, узкий выбор, нет юр. оформления</td>
                                    <td class="p-3">Демпинг</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3 class="text-xl font-semibold mt-8 mb-4">Стратегическое позиционирование и УТП</h3>
                    <p class="text-gray-600 mb-6">Мы не будем "дешевле", мы будем "удобнее и надежнее". Наше позиционирование — самый технологичный и клиентоориентированный сервис проката в городе.</p>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="p-4 border-l-4 border-amber-500 bg-amber-50">
                            <h4 class="font-bold text-amber-900">1. Аренда без залога для всех</h4>
                            <p class="text-sm text-amber-800 mt-1">Денежный залог заменяется небольшим обязательным страховым взносом. Это устраняет главный барьер для 90% клиентов.</p>
                        </div>
                        <div class="p-4 border-l-4 border-sky-500 bg-sky-50">
                            <h4 class="font-bold text-sky-900">2. Цифровое удобство</h4>
                             <p class="text-sm text-sky-800 mt-1">Сайт с онлайн-каталогом, бронированием в реальном времени, оплатой и электронным подписанием договора.</p>
                        </div>
                         <div class="p-4 border-l-4 border-green-500 bg-green-50">
                            <h4 class="font-bold text-green-900">3. Программа "Мастер-Партнер"</h4>
                             <p class="text-sm text-green-800 mt-1">Многоуровневая система лояльности для B2B-клиентов с накопительными скидками, приоритетным сервисом и постоплатой.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="finance" class="content-section">
                <div class="card">
                    <h2 class="text-2xl font-bold mb-4 text-gray-700">Интерактивная финансовая модель</h2>
                    <p class="text-gray-600 mb-6">Эта модель позволяет в реальном времени конструировать экономику проекта. Выбирайте инструменты для закупки, настраивайте их стоимость и арендные ставки, управляйте операционными расходами. Все итоговые показатели и графики обновятся автоматически.</p>

                    <div class="grid lg:grid-cols-2 gap-8 mb-8">
                        <!-- CAPEX -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                             <div id="capex-collapsible-header" class="collapsible-header flex justify-between items-center p-2">
                                <h3 class="text-xl font-semibold text-gray-800">Инвестиции в оборудование (CAPEX)</h3>
                                <span class="transform transition-transform duration-300">▼</span>
                            </div>
                            <div id="tool-catalog-wrapper" class="collapsible-content">
                                <!-- Catalog will be populated by JS -->
                            </div>
                             <div class="mt-4 border-t pt-4 p-2">
                                <div class="flex justify-between items-center text-lg font-bold">
                                    <span>Итого закупка инструмента:</span>
                                    <span id="totalToolCapex" class="text-blue-600">0 ₽</span>
                                </div>
                            </div>
                        </div>
                        <!-- OPEX -->
                        <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 space-y-4">
                            <h3 class="text-xl font-semibold text-gray-800">Операционные расходы (OPEX)</h3>
                             <div>
                                <label for="rentSlider" class="block font-medium text-sm text-gray-700">Аренда помещения, ₽/мес</label>
                                <input type="range" id="rentSlider" min="20000" max="80000" value="42000" step="1000">
                                <div class="text-right font-medium text-gray-700 mt-1"><span id="rentValue">42 000</span> ₽</div>
                            </div>
                             <div>
                                <label for="fotSlider" class="block font-medium text-sm text-gray-700">Фонд оплаты труда (ФОТ), ₽/мес</label>
                                <input type="range" id="fotSlider" min="100000" max="300000" value="200000" step="5000">
                                <div class="text-right font-medium text-gray-700 mt-1"><span id="fotValue">200 000</span> ₽</div>
                            </div>
                            <div>
                                <label for="marketingSliderFin" class="block font-medium text-sm text-gray-700">Маркетинг и реклама, ₽/мес</label>
                                <input type="range" id="marketingSliderFin" min="30000" max="100000" value="50000" step="1000">
                                <div class="text-right font-medium text-gray-700 mt-1"><span id="marketingValueFin">50 000</span> ₽</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-8">
                        <div class="p-4 bg-green-100 rounded-lg">
                            <div class="text-sm text-green-800">Выручка (3 года)</div>
                            <div id="fin_totalRevenue" class="text-2xl font-bold text-green-900">0 ₽</div>
                        </div>
                        <div class="p-4 bg-blue-100 rounded-lg">
                            <div class="text-sm text-blue-800">Чистая прибыль (3 года)</div>
                            <div id="fin_totalNetProfit" class="text-2xl font-bold text-blue-900">0 ₽</div>
                        </div>
                        <div class="p-4 bg-sky-100 rounded-lg">
                            <div class="text-sm text-sky-800">Срок окупаемости</div>
                            <div id="fin_payback" class="text-2xl font-bold text-sky-900">N/A</div>
                        </div>
                         <div class="p-4 bg-indigo-100 rounded-lg">
                            <div class="text-sm text-indigo-800">IRR (ВНД)</div>
                            <div id="fin_irr" class="text-2xl font-bold text-indigo-900">0%</div>
                        </div>
                    </div>

                     <div class="mt-8">
                        <h3 class="text-xl font-semibold mb-4 text-center">Прогноз прибылей и убытков (36 мес.)</h3>
                        <div class="chart-container">
                            <canvas id="pnlChart"></canvas>
                        </div>
                    </div>
                     <div class="mt-8">
                        <h3 class="text-xl font-semibold mb-4 text-center">Окупаемость проекта и накопленный денежный поток</h3>
                         <div class="chart-container">
                            <canvas id="paybackChart"></canvas>
                        </div>
                    </div>

                </div>
            </section>

            <section id="investor-pitch" class="content-section">
                 <div class="card">
                    <h2 class="text-2xl font-bold mb-4 text-gray-700">Презентация для инвестора</h2>
                    <p class="text-gray-600 mb-8">Краткая выжимка проекта, предназначенная для быстрой оценки его инвестиционной привлекательности. Все финансовые показатели в этом разделе напрямую связаны с интерактивной моделью и обновляются в реальном времени.</p>

                    <div class="space-y-10">
                        <div class="p-6 bg-gray-50 rounded-lg">
                            <h3 class="text-sm uppercase font-semibold text-gray-500">Проблема рынка</h3>
                            <p class="text-xl font-semibold text-gray-800 mt-2">Существующие сервисы проката в Архангельске требуют <span class="text-red-600">крупный денежный залог</span>, имеют устаревшие сайты без онлайн-бронирования и не предлагают системной работы с B2B-клиентами. Это создает неудобства и барьеры для пользователей.</p>
                        </div>
                        
                         <div class="p-6 bg-gray-50 rounded-lg">
                            <h3 class="text-sm uppercase font-semibold text-gray-500">Наше решение</h3>
                            <p class="text-xl font-semibold text-gray-800 mt-2">Мы создаем технологичный сервис, который решает эти проблемы: <span class="text-green-600">универсальная аренда без залога</span> через страхование, удобная <span class="text-green-600">цифровая платформа</span> для заказа и специальная <span class="text-green-600">программа лояльности</span> для профессионалов.</p>
                        </div>

                         <div class="p-6 bg-gray-50 rounded-lg">
                            <h3 class="text-sm uppercase font-semibold text-gray-500">Предложение инвестору</h3>
                            <p class="text-xl font-semibold text-gray-800 mt-2">Приглашаем к участию в проекте с высоким потенциалом роста на стабильном и понятном рынке. Для закупки оборудования, запуска и выхода на операционную прибыль требуются инвестиции в размере:</p>
                             <div class="text-center my-6">
                                <span class="text-5xl font-bold text-blue-600" id="pitch_investment_ask">4,850,000 ₽</span>
                            </div>
                            <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                <div class="bg-white p-4 rounded-lg border">
                                    <div class="text-sm text-gray-600">Прогнозируемый срок окупаемости</div>
                                    <div id="pitch_payback" class="text-2xl font-bold text-gray-800">28 мес.</div>
                                </div>
                                <div class="bg-white p-4 rounded-lg border">
                                    <div class="text-sm text-gray-600">Прогнозируемый ROI за 3 года</div>
                                    <div id="pitch_roi" class="text-2xl font-bold text-gray-800">145%</div>
                                </div>
                                 <div class="bg-white p-4 rounded-lg border">
                                    <div class="text-sm text-gray-600">Прогнозируемый IRR</div>
                                    <div id="pitch_irr" class="text-2xl font-bold text-gray-800">48%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="implementation" class="content-section">
                <div class="card">
                     <h2 class="text-2xl font-bold mb-4 text-gray-700">Пошаговый план реализации проекта</h2>
                    <p class="text-gray-600 mb-8">Запуск проекта разделен на четыре последовательных этапа, что позволяет системно и контролируемо двигаться от регистрации бизнеса до полномасштабной операционной деятельности.</p>
                    <div class="relative pl-8">
                        <div class="absolute left-3.5 top-0 h-full w-1 bg-gray-200"></div>
                        
                        <div class="relative mb-8">
                            <div class="absolute -left-[5px] top-1.5 w-4 h-4 rounded-full bg-blue-600 ring-4 ring-white"></div>
                            <div class="ml-10 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                <h3 class="font-bold text-blue-800">Этап 1: Подготовительный (Месяц 1-2)</h3>
                                <ul class="list-disc list-inside mt-2 text-sm text-blue-700 space-y-1">
                                    <li>Регистрация ИП, открытие расчетного счета.</li>
                                    <li>Поиск и заключение договора аренды помещения.</li>
                                    <li>Разработка и юридическая выверка шаблонов договоров.</li>
                                    <li>Проведение переговоров и заключение рамочных договоров со страховыми компаниями.</li>
                                    <li>Создание и наполнение веб-сайта.</li>
                                </ul>
                            </div>
                        </div>

                         <div class="relative mb-8">
                            <div class="absolute -left-[5px] top-1.5 w-4 h-4 rounded-full bg-amber-600 ring-4 ring-white"></div>
                             <div class="ml-10 p-4 bg-amber-50 border border-amber-200 rounded-lg">
                                <h3 class="font-bold text-amber-800">Этап 2: Запуск и оснащение (Месяц 2-3)</h3>
                                <ul class="list-disc list-inside mt-2 text-sm text-amber-700 space-y-1">
                                    <li>Проведение ремонта и обустройства пункта выдачи.</li>
                                    <li>Закупка и доставка стартового парка оборудования (Фаза 1).</li>
                                    <li>Покупка и постановка на учет транспортного средства.</li>
                                    <li>Закупка и настройка IT-инфраструктуры, внедрение CRM-системы.</li>
                                    <li>Оснащение оборудования GPS-трекерами.</li>
                                </ul>
                            </div>
                        </div>
                        
                         <div class="relative mb-8">
                            <div class="absolute -left-[5px] top-1.5 w-4 h-4 rounded-full bg-green-600 ring-4 ring-white"></div>
                            <div class="ml-10 p-4 bg-green-50 border border-green-200 rounded-lg">
                                <h3 class="font-bold text-green-800">Этап 3: Старт операций (Месяц 4)</h3>
                                <ul class="list-disc list-inside mt-2 text-sm text-green-700 space-y-1">
                                    <li>Наем и обучение двух менеджеров-техников.</li>
                                    <li>Запуск полномасштабной рекламной кампании в Яндекс.Директ.</li>
                                    <li>Размещение объявлений на Avito и других площадках.</li>
                                    <li>Официальное открытие пункта проката и обработка первых заказов.</li>
                                </ul>
                            </div>
                        </div>

                         <div class="relative">
                            <div class="absolute -left-[5px] top-1.5 w-4 h-4 rounded-full bg-indigo-600 ring-4 ring-white"></div>
                            <div class="ml-10 p-4 bg-indigo-50 border border-indigo-200 rounded-lg">
                                <h3 class="font-bold text-indigo-800">Этап 4: Рост и оптимизация (Месяц 5-12)</h3>
                                <ul class="list-disc list-inside mt-2 text-sm text-indigo-700 space-y-1">
                                    <li>Активное привлечение B2B-клиентов по программе "Мастер-Партнер".</li>
                                    <li>Постоянный анализ эффективности рекламных кампаний и оптимизация бюджета.</li>
                                    <li>Сбор обратной связи от первых клиентов для улучшения сервиса.</li>
                                    <li>Планирование второй фазы закупки оборудования на основе анализа спроса.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const tabs = document.querySelectorAll('nav button');
    const sections = document.querySelectorAll('.content-section');
    let capexChartSummary, pnlChart, paybackChart;

    const formatCurrency = (value, fractionDigits = 0) => new Intl.NumberFormat('ru-RU', { minimumFractionDigits: fractionDigits, maximumFractionDigits: fractionDigits }).format(value);

    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            tabs.forEach(t => t.classList.replace('tab-active', 'tab-inactive'));
            tab.classList.replace('tab-inactive', 'tab-active');
            sections.forEach(s => s.classList.toggle('active', s.id === tab.dataset.tab));
        });
    });

    const toolCatalogData = [
        { id: 'perf_sds_plus', name: 'Перфоратор SDS-Plus', purchase: 18000, rent: 800, rentals: 12, demand: 95, category: 'Бетон и Демонтаж', checked: true, qty: 4 },
        { id: 'hammer_sds_max', name: 'Отбойный молоток SDS-Max', purchase: 79000, rent: 1800, rentals: 8, demand: 80, category: 'Бетон и Демонтаж', checked: true, qty: 2 },
        { id: 'mixer_140l', name: 'Бетономешалка 140 л', purchase: 11000, rent: 700, rentals: 7, demand: 60, category: 'Бетон и Демонтаж', checked: true, qty: 2 },
        { id: 'vibro_100kg', name: 'Виброплита (80-100 кг)', purchase: 176000, rent: 2500, rentals: 6, demand: 75, category: 'Бетон и Демонтаж', checked: true, qty: 1 },
        { id: 'ugm_125', name: 'УШМ ("Болгарка") 125 мм', purchase: 25000, rent: 700, rentals: 15, demand: 98, category: 'Резка и Шлифовка', checked: true, qty: 4 },
        { id: 'ugm_230', name: 'УШМ ("Болгарка") 230 мм', purchase: 19000, rent: 850, rentals: 10, demand: 90, category: 'Резка и Шлифовка', checked: true, qty: 2 },
        { id: 'benzorez_350', name: 'Бензорез 350 мм', purchase: 135000, rent: 2200, rentals: 8, demand: 85, category: 'Резка и Шлифовка', checked: true, qty: 1 },
        { id: 'shtroborez', name: 'Штроборез', purchase: 45000, rent: 1500, rentals: 9, demand: 70, category: 'Резка и Шлифовка', checked: true, qty: 1 },
        { id: 'svarka', name: 'Сварочный инвертор (MMA)', purchase: 9100, rent: 600, rentals: 8, demand: 75, category: 'Сварка и Нагрев', checked: true, qty: 2 },
        { id: 'heatgun_diesel', name: 'Тепловая пушка дизельная', purchase: 58700, rent: 1200, rentals: 10, demand: 92, category: 'Сварка и Нагрев', checked: true, qty: 2 },
        { id: 'heatgun_gas', name: 'Тепловая пушка газовая', purchase: 20400, rent: 800, rentals: 12, demand: 90, category: 'Сварка и Нагрев', checked: true, qty: 3 },
        { id: 'laser_level', name: 'Лазерный нивелир 360°', purchase: 19990, rent: 750, rentals: 14, demand: 88, category: 'Измерение и Контроль', checked: true, qty: 2 },
        { id: 'laser_range', name: 'Лазерный дальномер', purchase: 3690, rent: 400, rentals: 10, demand: 70, category: 'Измерение и Контроль', checked: true, qty: 3 },
        { id: 'thermal_imager', name: 'Тепловизор', purchase: 25000, rent: 1500, rentals: 5, demand: 50, category: 'Измерение и Контроль', checked: true, qty: 1 },
        { id: 'chainsaw', name: 'Бензопила', purchase: 29990, rent: 900, rentals: 10, demand: 85, category: 'Садовая техника', checked: true, qty: 2 },
        { id: 'ground_drill', name: 'Мотобур', purchase: 20000, rent: 1000, rentals: 8, demand: 65, category: 'Садовая техника', checked: true, qty: 1 },
        { id: 'vacuum', name: 'Промышленный пылесос', purchase: 10000, rent: 600, rentals: 12, demand: 80, category: 'Прочее', checked: true, qty: 2 },
        { id: 'ladder', name: 'Лестница-трансформер', purchase: 15000, rent: 500, rentals: 9, demand: 78, category: 'Прочее', checked: true, qty: 2 }
    ];

    const baseline = {
        fixedCapex: {
            transport: 600000,
            fitOut: 350000,
            it: 200000,
            legal: 20000,
            marketingLaunch: 150000
        },
        workingCapital: 1000000,
        baseOpex: {
            bookkeeping: 10000,
            software: 2000,
            insurance: 1500,
            admin: 5000
        },
        variableOpexRate: {
            maintenance: 0.03,
            fuel: 0.01,
            consumables: 0.02
        },
        taxRate: 0.15,
        seasonality: [-0.2, -0.2, 0.15, 0.15, 0.15, 0.15, 0.15, 0.15, -0.1, -0.1, -0.1, -0.2],
    };

    const toolCatalogWrapper = document.getElementById('tool-catalog-wrapper');

    function populateToolCatalog() {
        const categories = [...new Set(toolCatalogData.map(t => t.category))];
        
        const headers = document.createElement('div');
        headers.className = 'grid grid-cols-12 gap-2 items-center text-sm font-semibold p-2 border-b';
        headers.innerHTML = `
            <div class="col-span-12 md:col-span-6">Наименование</div>
            <div class="col-span-4 md:col-span-2 text-center">Цена закупки, ₽</div>
            <div class="col-span-4 md:col-span-2 text-center">Аренда/сутки, ₽</div>
            <div class="col-span-4 md:col-span-2 text-center">Аренд/мес</div>
        `;
        toolCatalogWrapper.appendChild(headers);

        categories.forEach(category => {
            const categoryWrapperEl = document.createElement('div');
            categoryWrapperEl.className = 'border-t';
            const header = document.createElement('div');
            header.className = 'collapsible-header flex justify-between items-center p-2 bg-gray-100 hover:bg-gray-200';
            header.innerHTML = `<h4 class="font-semibold">${category}</h4><span class="transform transition-transform duration-300">▶</span>`;
            
            const content = document.createElement('div');
            content.className = 'collapsible-content';
            
            const ul = document.createElement('ul');
            ul.className = 'p-2 space-y-3';
            toolCatalogData.filter(t => t.category === category).forEach(tool => {
                const li = document.createElement('li');
                li.className = 'grid grid-cols-12 gap-2 items-center text-sm';
                li.dataset.id = tool.id;

                li.innerHTML = `
                    <div class="col-span-12 md:col-span-6 flex items-center">
                        <input type="checkbox" data-prop="checked" class="mr-2" ${tool.checked ? 'checked' : ''}>
                        <label>${tool.name} (x${tool.qty})</label>
                        <span class="ml-auto text-xs text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded" title="Процент востребованности">${tool.demand}%</span>
                    </div>
                    <div class="col-span-4 md:col-span-2"><input type="number" data-prop="purchase" class="input-number-sm text-center" value="${tool.purchase}"></div>
                    <div class="col-span-4 md:col-span-2"><input type="number" data-prop="rent" class="input-number-sm text-center" value="${tool.rent}"></div>
                    <div class="col-span-4 md:col-span-2"><input type="number" data-prop="rentals" class="input-number-sm text-center" value="${tool.rentals}"></div>
                `;
                ul.appendChild(li);
            });
            content.appendChild(ul);
            categoryWrapperEl.appendChild(header);
            categoryWrapperEl.appendChild(content);
            toolCatalogWrapper.appendChild(categoryWrapperEl);
        });

        const mainCapexHeader = document.getElementById('capex-collapsible-header');
        mainCapexHeader.addEventListener('click', () => {
             const content = document.getElementById('tool-catalog-wrapper');
             const icon = mainCapexHeader.querySelector('span');
             toggleCollapsible(content, icon, true);
        });
        
        document.querySelectorAll('#tool-catalog-wrapper .collapsible-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const icon = header.querySelector('span');
                toggleCollapsible(content, icon);
            });
        });

        toolCatalogWrapper.addEventListener('change', updateUI);
    }
    
    function toggleCollapsible(content, icon, isMain = false) {
        if (content.style.maxHeight && content.style.maxHeight !== '0px') {
            content.style.maxHeight = null;
            icon.style.transform = isMain ? 'rotate(0deg)' : 'rotate(0deg)';
        } else {
            content.style.maxHeight = content.scrollHeight + "px";
            icon.style.transform = isMain ? 'rotate(180deg)' : 'rotate(90deg)';
        }
    }
    
    function calculateFinancials() {
        let toolCapex = 0;
        let baseMonthlyRevenue = 0;
        
        document.querySelectorAll('#tool-catalog-wrapper li[data-id]').forEach(li => {
            const toolId = li.dataset.id;
            const originalTool = toolCatalogData.find(t => t.id === toolId);
            const isChecked = li.querySelector('[data-prop="checked"]').checked;
            
            if (isChecked) {
                const purchasePrice = parseFloat(li.querySelector('[data-prop="purchase"]').value) || 0;
                const rentPrice = parseFloat(li.querySelector('[data-prop="rent"]').value) || 0;
                const rentals = parseFloat(li.querySelector('[data-prop="rentals"]').value) || 0;
                
                toolCapex += purchasePrice * originalTool.qty;
                baseMonthlyRevenue += rentPrice * rentals * originalTool.qty;
            }
        });

        const fixedCapexTotal = Object.values(baseline.fixedCapex).reduce((a, b) => a + b, 0);
        const totalInvestment = toolCapex + fixedCapexTotal;
        const depreciationMonthly = toolCapex / 36;
        
        const rentOpex = parseFloat(document.getElementById('rentSlider').value);
        const fotOpex = parseFloat(document.getElementById('fotSlider').value);
        const marketingOpex = parseFloat(document.getElementById('marketingSliderFin').value);
        const baseOpex = Object.values(baseline.baseOpex).reduce((a, b) => a + b, 0);
        
        const fixedOpexTotal = rentOpex + fotOpex + marketingOpex + baseOpex;

        const results = { revenue: [], netProfit: [], cumulativeCashFlow: [], toolCapex };
        let cumulativeFlow = -totalInvestment;
        const utilizationGrowth = [0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1, 1, 1, 1, 1, 1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2];

        for (let i = 0; i < 36; i++) {
            const seasonalFactor = 1 + baseline.seasonality[i % 12];
            const currentRevenue = baseMonthlyRevenue * utilizationGrowth[i] * seasonalFactor;
            const variableCostsTotal = currentRevenue * Object.values(baseline.variableOpexRate).reduce((a, b) => a + b, 0);
            const totalOpex = fixedOpexTotal + variableCostsTotal;

            const ebitda = currentRevenue - totalOpex;
            const ebit = ebitda - depreciationMonthly;
            const tax = ebit > 0 ? ebit * baseline.taxRate : 0;
            const netProfit = ebit - tax;
            const cashFlow = netProfit + depreciationMonthly;
            cumulativeFlow += cashFlow;

            results.revenue.push(currentRevenue);
            results.netProfit.push(netProfit);
            results.cumulativeCashFlow.push(cumulativeFlow);
        }
        return results;
    }

    function calculateIRR(cashflows, initialInvestment) {
        if (initialInvestment === 0) return 0;
        const flows = [-initialInvestment, ...cashflows];
        let irr = 0.1;
        let npv = 1;
        let attempts = 0;
        while (Math.abs(npv) > 0.01 && attempts < 1000) {
            npv = flows.reduce((acc, val, i) => acc + val / Math.pow(1 + irr, i), 0);
            if (npv > 0) { irr += 0.001; } else { irr -= 0.001; }
            attempts++;
        }
        return irr > 0 ? irr * 100 : 0;
    }

    function updateUI() {
        const data = calculateFinancials();

        const totalRevenue = data.revenue.reduce((a, b) => a + b, 0);
        const totalNetProfit = data.netProfit.reduce((a, b) => a + b, 0);

        let paybackMonths = 'N/A';
        const paybackIndex = data.cumulativeCashFlow.findIndex(p => p >= 0);
        if (paybackIndex !== -1) { paybackMonths = `${paybackIndex + 1} мес.`; }
        
        const fixedCapexTotal = Object.values(baseline.fixedCapex).reduce((a, b) => a + b, 0);
        const totalInvestment = data.toolCapex + fixedCapexTotal;
        const totalInvestmentWithWC = totalInvestment + baseline.workingCapital;
        
        const yearlyCashFlows = [
            data.netProfit.slice(0, 12).reduce((a, b) => a + b, 0) + (data.toolCapex / 3),
            data.netProfit.slice(12, 24).reduce((a, b) => a + b, 0) + (data.toolCapex / 3),
            data.netProfit.slice(24, 36).reduce((a, b) => a + b, 0) + (data.toolCapex / 3),
        ];
        const irr = calculateIRR(yearlyCashFlows, totalInvestment);
        const roi = totalInvestment > 0 ? (totalNetProfit / totalInvestment) * 100 : 0;

        document.getElementById('rentValue').textContent = formatCurrency(document.getElementById('rentSlider').value);
        document.getElementById('fotValue').textContent = formatCurrency(document.getElementById('fotSlider').value);
        document.getElementById('marketingValueFin').textContent = formatCurrency(document.getElementById('marketingSliderFin').value);
        document.getElementById('totalToolCapex').textContent = `${formatCurrency(data.toolCapex)} ₽`;
        
        document.getElementById('summary_investment').textContent = `${formatCurrency(totalInvestmentWithWC)} ₽`;
        document.getElementById('summary_payback').textContent = paybackMonths;
        document.getElementById('summary_roi').textContent = `${formatCurrency(roi)}%`;
        document.getElementById('summary_revenue_y3').textContent = `${formatCurrency(data.revenue.slice(24,36).reduce((a,b)=>a+b,0) / 1000000, 2)} млн ₽`;
        
        document.getElementById('fin_totalRevenue').textContent = `${formatCurrency(totalRevenue/1000000, 1)} млн ₽`;
        document.getElementById('fin_totalNetProfit').textContent = `${formatCurrency(totalNetProfit/1000000, 1)} млн ₽`;
        document.getElementById('fin_payback').textContent = paybackMonths;
        document.getElementById('fin_irr').textContent = `${formatCurrency(irr, 1)}%`;

        document.getElementById('pitch_investment_ask').textContent = `${formatCurrency(totalInvestmentWithWC)} ₽`;
        document.getElementById('pitch_payback').textContent = paybackMonths;
        document.getElementById('pitch_roi').textContent = `${formatCurrency(roi)}%`;
        document.getElementById('pitch_irr').textContent = `${formatCurrency(irr, 1)}%`;
        
        updateCharts(data, totalInvestment);
    }

    function initCharts() {
        capexChartSummary = new Chart(document.getElementById('capexChartSummary').getContext('2d'), {
            type: 'doughnut',
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
        });

        pnlChart = new Chart(document.getElementById('pnlChart').getContext('2d'), {
            type: 'bar',
            data: { 
                labels: Array.from({length: 36}, (_, i) => `${i + 1}`),
                datasets: [
                    { label: 'Выручка', type: 'bar', data: [], backgroundColor: 'rgba(75, 192, 192, 0.6)' },
                    { label: 'Чистая прибыль', type: 'line', data: [], borderColor: '#A37F5A', tension: 0.3, fill: false }
                ]
            },
            options: { responsive: true, maintainAspectRatio: false, scales: { x: { title: {display: true, text: 'Месяц'} }, y: { ticks: { callback: (v) => `${v/1000}k` } } }, plugins: { tooltip: { mode: 'index' } } }
        });

        paybackChart = new Chart(document.getElementById('paybackChart').getContext('2d'), {
             type: 'line', 
             data: { 
                 labels: Array.from({length: 36}, (_, i) => `${i + 1}`), 
                 datasets: [{ label: 'Накопленный денежный поток', data: [], borderColor: '#4A90E2', backgroundColor: 'rgba(74, 144, 226, 0.1)', fill: true, tension: 0.1 }] 
             },
             options: { responsive: true, maintainAspectRatio: false, scales: { x: { title: {display: true, text: 'Месяц'} }, y: { ticks: { callback: (v) => `${v/1000}k ₽` } } } }
        });
    }

    function updateCharts(data, totalInvestment) {
        const fixedCapex = baseline.fixedCapex;
        capexChartSummary.data = {
            labels: ['Оборудование', 'Транспорт', 'Обустройство', 'Оборотный капитал', 'IT и прочее'],
            datasets: [{
                data: [
                    data.toolCapex,
                    fixedCapex.transport,
                    fixedCapex.fitOut,
                    baseline.workingCapital,
                    fixedCapex.it + fixedCapex.legal + fixedCapex.marketingLaunch
                ],
                backgroundColor: ['#4A90E2', '#50E3C2', '#F5A623', '#F8E71C', '#BD10E0'],
                borderColor: '#FFFFFF',
                borderWidth: 2
            }]
        };
        capexChartSummary.update();
        
        pnlChart.data.datasets[0].data = data.revenue;
        pnlChart.data.datasets[1].data = data.netProfit;
        pnlChart.update();

        paybackChart.data.datasets[0].data = data.cumulativeCashFlow;
        paybackChart.update();
    }
    
    [document.getElementById('rentSlider'), document.getElementById('fotSlider'), document.getElementById('marketingSliderFin')].forEach(s => s.addEventListener('input', updateUI));
    
    populateToolCatalog();
    initCharts();
    updateUI();
});
</script>
</body>
</html>

